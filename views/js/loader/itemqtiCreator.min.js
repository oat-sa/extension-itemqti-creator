define("itemqtiCreator/qtiPreview/previewLauncher",["jquery","lodash","module","core/promise","taoItems/preview/preview"],function($,_,module,Promise,preview){"use strict";return function(previewUrl,returnUrl){var config=module.config();return previewUrl=previewUrl||config.previewUrl,returnUrl=config.returnUrl,_.isEmpty(previewUrl)?Promise.reject(new TypeError("Unable to to run the preview without a launch URL")):(preview.init(config.previewUrl),preview.show().then(function(){$(".preview-closer").on("click",function(){_.isEmpty(returnUrl)||_.delay(function(){window.location=returnUrl},300)})}))}}),define("itemqtiCreator/controller/PreviewTool/run",[
"ui/feedback","itemqtiCreator/qtiPreview/previewLauncher"],function(feedback,previewLauncher){"use strict";return{start:function(){previewLauncher().catch(function(err){feedback().error("It seems the preview of the item couldn't be launched : "+err.message)})}}}),define("itemqtiCreator/controller/routes",[],function(){"use strict";return{PreviewTool:{actions:{run:"controller/PreviewTool/run"}}}}),define("itemqtiCreator/qtiCreator/plugins/menu/close",["jquery","lodash","i18n","core/plugin","ui/hider","tpl!taoQtiItem/qtiCreator/plugins/button"],function($,_,__,pluginFactory,hider,buttonTpl){"use strict";return pluginFactory({name:"close",init:function(){
var self=this,config=this.getHost().getConfig();this.$element=$(buttonTpl({icon:"close",title:__("Close the creator, without saving"),text:__("Close"),cssClass:""})).on("click",function(e){e.preventDefault(),self.disable(),config&&config.properties&&_.isString(config.properties.returnUrl)?_.delay(function(){window.location=config.properties.returnUrl},300):_.delay(function(){self.enable(),window.close()},300)}),this.hide()},render:function(){this.getAreaBroker().getMenuArea().append(this.$element),this.show()},destroy:function(){this.$element.remove()},enable:function(){this.$element.removeProp("disabled").removeClass("disabled")},disable:function(){
this.$element.prop("disabled",!0).addClass("disabled")},show:function(){hider.show(this.$element)},hide:function(){hider.hide(this.$element)}})}),define("itemqtiCreator/qtiCreator/plugins/menu/saveAndClose",["jquery","lodash","i18n","core/plugin","ui/hider","tpl!taoQtiItem/qtiCreator/plugins/button"],function($,_,__,pluginFactory,hider,buttonTpl){"use strict";return pluginFactory({name:"saveAndClose",init:function(){var self=this,itemCreator=this.getHost(),config=itemCreator.getConfig();this.$element=$(buttonTpl({icon:"save",title:__("Save and close the creator"),text:__("Save & Close"),cssClass:""})).on("click",function(e){e.preventDefault(),self.disable(),
itemCreator.on("saved.closing",function(){itemCreator.off("saved.closing"),config&&config.properties&&_.isString(config.properties.returnUrl)?_.delay(function(){window.location=config.properties.returnUrl},300):_.delay(function(){self.enable(),window.close()},300)}).trigger("save")}),this.hide()},render:function(){this.getAreaBroker().getMenuArea().append(this.$element),this.show()},destroy:function(){this.$element.remove()},enable:function(){this.$element.removeProp("disabled").removeClass("disabled")},disable:function(){this.$element.prop("disabled",!0).addClass("disabled")},show:function(){hider.show(this.$element)},hide:function(){hider.hide(
this.$element)}})}),define("itemqtiCreator/loader/itemqtiCreator.bundle",function(){}),define("itemqtiCreator/loader/itemqtiCreator.min",["taoItems/loader/taoItems.min","taoQtiItem/loader/taoQtiItem.min"],function(){});
//# sourceMappingURL=itemqtiCreator.min.js.map